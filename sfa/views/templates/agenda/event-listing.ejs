<div class="widget widget-nopad">
    <div class="widget-header"><i class="fa fa-fw fa-calendar"></i> Eventos
        <a href="/criar_evento{{currentCtrl.customer.CodCliente? '?clienteId=' + currentCtrl.customer.CodCliente : ''}}" class="pull-right"><i class="fa fa-plus-square">&nbsp</i></a>
    </div>

    <div class="widget-content">
        <div class="widget big-stats-container" style="overflow-y: auto; height:445px;">
            <div class="widget-content">

                <div ng-show="currentCtrl.loadingEvents" class="span10">
                    <% include ../common/loading.ejs %>
                </div>

                <div ng-show="!currentCtrl.loadingEvents && currentCtrl.events.length == 0" class="span10">
                    Não foram encontrados eventos...
                </div>


                <div ng-hide="currentCtrl.loadingEvents || currentCtrl.events.length == 0">
                    <ul class="nav nav-pills">
                        <li ng-class="{ active:!currentCtrl.showAllEvents }">
                            <a href ng-click="currentCtrl.showAllEvents=false">Meus</a>
                        </li>
                        <li ng-class="{ active:currentCtrl.showAllEvents }">
                            <a href ng-click="currentCtrl.showAllEvents=true">Todos</a>
                        </li>
                    </ul>

                    <form>
                        <table class="table">
                            <thead>
                            <tr>
                                <th style="width: 10%;">Tipo</th>
                                <th style="width: 20%;">Data</th>
                                <th style="width: 45%;">Descrição</th>
                                <th style="width: 20%;" ng-hide="currentCtrl.customer.CodCliente">Cliente</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="event in currentCtrl.events | orderBy : '-DataInicio'" ng-show="currentCtrl.showAllEvents || event.CodVendedor==<%=user%>">
                                <td><a href="evento?id={{event.CodReuniao}}">{{event.Tipo}}</a></td>
                                <td>{{event.DataInicio | date:"dd-MM-yyyy"}} <br>
                                    {{event.TodoDia ? '' : event.DataInicio | date:"HH:mm" }}
                                    {{event.TodoDia ? '' : " até " + (event.DataFim | date:"HH:mm") }}
                                    {{event.TodoDia ? 'Todo o dia' : ''}}</td>
                                <td>{{event.Descricao}}</td>
                                <td ng-hide="currentCtrl.customer.CodCliente">{{event.Entidade}}</td>
                            </tr>
                            </tbody>
                        </table>
                    </form>
                </div>

            </div>
        </div>
    </div>
</div>